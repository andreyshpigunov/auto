/*---------------------------
_modal.scss
Modal windows

Created by Andrey Shpigunov on 14.12.2020.
---------------------------*/

html.modal-active {
	body {
		overflow: hidden;
	}
}

// Modal window content
.modal-content {
	display: none;
}

// Main div
.modal {
	position: fixed;
	z-index: -10000;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	padding: 0;
	visibility: hidden;

	&.top {
		z-index: 10000;
		visibility: visible;
	}

	@for $level from 1 through 10 {
		&.top.level-#{$level} {
			z-index: 10000 + $level;
		}
	}

	// Overlay
	.modal-overlay {
		position: absolute;
		z-index: 10010;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		background-color: rgba(0, 0, 0, 0.4);
	}

	// Main structure
	.modal-outer {
		position: relative;
		z-index: 10020;
		width: 100%;
		height: 100%;
		padding: 60px;
		overflow: auto;
		-webkit-overflow-scrolling: touch;

		@include screen(small) {
			padding: 5px;
		}
	}
	.modal-inner {
		display: flex;
		flex-direction: column;
		min-height: 100%;
	}

	// Modal window
	.modal-window {
		position: relative;
		z-index: 10030;
		width: 100%;
		max-width: 800px;
		margin: auto;
		padding: 40px 50px;
		text-align: left;
		background: #fff;
		box-shadow: 0 6px 30px rgba(0, 0, 0, 0.25);
		border-radius: 6px;

		@include screen(small) {
			padding: 40px 6vw;
			box-shadow: none;
		}
	}

	// Close cross
	.modal-close {
		display: block;
		position: absolute;
		z-index: 10040;
		top: 6px;
		right: 6px;
		width: 40px;
		height: 40px;
		font-weight: 200;
		border: none;
		border-radius: 100%;

		will-change: opacity;
		opacity: 0;
		transition: opacity 0.15s ease-out;

		&:before,
		&:after {
			content: "";
			display: block;
			position: absolute;
			top: 19px;
			left: 8px;
			width: 24px;
			height: 2px;

			will-change: color;
			background: #ccc;
			transition: background 0.15s ease-out;
			transform-origin: center;
		}

		&:before {
			transform: rotate(-45deg);
		}
		&:after {
			transform: rotate(45deg);
		}
	}

	&.active .modal-close {
		opacity: 1;

		&:hover,
		&:active {
			&:before,
			&:after {
				background: #f00;
			}
		}
	}
}

// Effects
// -------
// https://github.com/codrops/ModalWindowEffects

.modal {
	.modal-overlay {
		will-change: opacity;
		opacity: 0;
		transition: opacity 0.2s ease-out;
	}
	&.active .modal-overlay {
		opacity: 1;
	}

	.modal-window {
		will-change: opacity, transform;
		opacity: 0;
		transform: scale(0.97);
		transition: all 0.12s ease-out;
	}
	&.active .modal-window {
		transform: scale(1);
		opacity: 1;
	}

	&.effect-in {
		.modal-window {
			transform: scale(0.9);
			transition: all 0.15s ease-out;
		}
		&.active .modal-window {
			transform: scale(1);
			transition: all 0.2s ease-out;
		}
	}

	&.effect-out {
		.modal-window {
			transform: scale(1.1);
			transition: all 0.15s ease-out;
		}
		&.active .modal-window {
			transform: scale(1);
			transition: all 0.2s ease-out;
		}
	}

	&.effect-up {
		.modal-window {
			transform: translateY(30px);
			transition: all 0.2s ease-out;
		}
		&.active .modal-window {
			transform: translateY(0);
		}
	}

	&.effect-down {
		.modal-window {
			transform: translateY(-30px);
			transition: all 0.2s ease-out;
		}
		&.active .modal-window {
			transform: translateY(0);
		}
	}

	&.effect-left {
		.modal-window {
			transform: translateX(-30px);
			transition: all 0.2s ease-out;
		}
		&.active .modal-window {
			transform: translateX(0);
		}
	}

	&.effect-right {
		.modal-window {
			transform: translateX(30px);
			transition: all 0.2s ease-out;
		}
		&.active .modal-window {
			transform: translateX(0);
		}
	}
}
